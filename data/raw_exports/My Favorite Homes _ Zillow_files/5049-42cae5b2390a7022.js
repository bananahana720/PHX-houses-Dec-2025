"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5049],{2943:function(e,r,t){t.d(r,{M:function(){return s}});var n=t(2500),o=t(3027),a=function(){try{window._hasProfiledHydration||(window._hasProfiledHydration=!0,(0,n.profile)("subapp_hydration_complete"),console.debug("[Hydration Tracker] Recorded hydration complete"))}catch(e){console.warn("[Hydration Tracker] Failed to record hydration:",e)}},s=function(){var e=(0,o.useRef)(null),r=(0,o.useRef)(null);return(0,o.useEffect)(function(){if(!window._hasProfiledHydration)return(0,n.registerEvent)("subapp_hydration_complete"),e.current||(e.current=setTimeout(function(){r.current=requestAnimationFrame(a)},1)),function(){e.current&&(clearTimeout(e.current),e.current=null),r.current&&(cancelAnimationFrame(r.current),r.current=null)}},[]),null}},5049:function(e,r,t){t.d(r,{Z:function(){return U}});var n,o,a=t(9499),s=t(4730),i=t(29),c=t(4687),u=t.n(c);t(3027);var d=t(2918),p=t.n(d),l=t(3116),f=t(6970),h=t(9097),m=t(8357),v=t(7812),g=[{DOMContentLoaded:{dynamicEvent:!1,graphiteName:"DOMContentLoaded",thresholds:{delighted:1500,satisfied:15e3}}},{fullyLoaded:{dynamicEvent:!1,graphiteName:"fullyLoaded",thresholds:{delighted:1e4,satisfied:15e3}}},{"Load Listing Type Interstitial":{dynamicEvent:!0,graphiteName:"ListingTypeInsterstitialLoad",thresholds:{delighted:0,satisfied:5e3}}},{TTFB:{dynamicEvent:!1,graphiteName:"TTFB",thresholds:{delighted:600,satisfied:1e3}}},{TTI:{dynamicEvent:!1,graphiteName:"TTI",thresholds:{delighted:5e3,satisfied:8e3}}}],b=[{SphereViewerTexture4K:{graphiteName:"SphereViewerTexture4K",dynamicEvent:!0,thresholds:{delighted:0,satisfied:8e3}}},{SphereViewerTexture8K:{graphiteName:"SphereViewerTexture8K",dynamicEvent:!0,thresholds:{delighted:0,satisfied:8e3}}}],w={"for-sale-page":[].concat(b),"not-for-sale-page":[].concat(b),"for-rent-page":[].concat(b),"search-page-sub-app":[].concat([{"Priority UI Ready":{dynamicEvent:!1,graphiteName:"PriorityUIReady",thresholds:{delighted:3500,satisfied:1e4}}},{"search page nav ad first display":{dynamicEvent:!1,graphiteName:"SearchPageNavAdLoaded",thresholds:{delighted:0,satisfied:0}}}])},y=function(e){var r;return[].concat(g,(0,v.Z)(null!==(r=null==w?void 0:w[e])&&void 0!==r?r:[]))},x=t(5269),P=t(1590),N=t(5893),E=t(3046),k=function(e){window.shopperPlatformLoaded=window.shopperPlatformLoaded||{},window.shopperPlatformLoaded.shopperPlatformVersion||(window.shopperPlatformLoaded.shopperPlatformVersion=m.eI),window.shopperPlatformLoaded.subApps||(window.shopperPlatformLoaded.subApps=new Map),window.shopperPlatformLoaded.subApps.set("".concat(e),"Undefined Version")},C=t(353),S=t(3852),_=t(1037),I="reloadCount",T="subAppName",O="maxReloads",L=function(e){var r=e.subAppName,t=void 0===r?"undefinedSubAppName":r,n=(0,S.useBotState)();if((0,x.Z)())return console.error("Unable to handle client side rehydrate failure"),(0,N.jsx)(p(),{statusCode:500});var o=new URL(window.location.href),a=Number(o.searchParams.get(I))||0,s=Number(o.searchParams.get(O))||0;return(0,_.n)()?s>0||n&&a>2?(0,N.jsx)(p(),{statusCode:500}):(a>2?window.location.href="/?".concat(O,"=1&").concat(T,"=").concat(t):(o.searchParams.set(I,a+1),o.searchParams.set(T,t),window.location.href=o.href),null):null},A=t(195),j={PRODUCTION:"production"},R=t(4009);function Z(){return(Z=(0,i.Z)(u().mark(function e(r){var n,a,s;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,R.bm)({request:r}),e.abrupt("return",null);case 3:if(e.prev=3,o){e.next=8;break}return e.next=7,t.e(9758).then(t.bind(t,9758));case 7:o=e.sent.default;case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(3),console.warn("[getLogsForClient] Failed to load LogCaptureManager:",e.t0.message),e.abrupt("return",null);case 14:if(e.prev=14,!(n=r.__correlationId||o.getCurrentCorrelationId())){e.next=22;break}return s={logs:a=o.getLogsForCorrelationId(n),correlationId:n,timestamp:new Date().toISOString(),bufferSize:a.length},r.__correlationId||o.clearCorrelationId(),setTimeout(function(){o.clearLogsForCorrelationId(n)},1e3),e.abrupt("return",s);case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(14),console.warn("[localSubAppLoggingMiddleware] Failed to retrieve logs:",e.t1.message);case 27:return e.abrupt("return",null);case 28:case"end":return e.stop()}},e,null,[[3,10],[14,24]])}))).apply(this,arguments)}var D=t(2943),V=["ServerSideComponent"];function F(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function M(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?F(Object(t),!0).forEach(function(r){(0,a.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):F(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var U=(n=(0,i.Z)(u().mark(function e(){var r,t,n,o,a,c,d,v,g,b,w,S,_,I,T,O,R,F,U,H,K,q,B=arguments;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(U=function(e){var r,t=e.ServerSideComponent,o=(0,s.Z)(e,V),i=null!=t?t:I,c=null!==(r=null==t?void 0:t.__version)&&void 0!==r?r:T,u=function(e){var r={};return r.subAppName=e,r.SERVICE_VERSION=m.eI,r.config=m.Iw,r.trackedEventDetails=y(e),r}(n);return k(n),(0,N.jsxs)(h.S,{onCatch:P.Z,componentTitle:"".concat(m.m_,"--").concat(n),children:[!(0,x.Z)()&&(0,N.jsx)(l.i,M({},u)),w&&(0,N.jsx)(w,{}),i&&(0,N.jsx)(f.SubAppRumProvider,{type:"page",name:"".concat(a,"/").concat(d),version:c,children:(0,N.jsx)(i,M({},o))}),i&&(0,N.jsx)(D.M,{})]})},n=void 0===(t=(r=B.length>0&&void 0!==B[0]?B[0]:{}).pageName)?"page name not provided":t,a=void 0===(o=r.subAppName)?"sub app name not provided":o,d=void 0===(c=r.exposedModuleName)?"sub app exposed name not provided":c,g=void 0===(v=r.exportName)?"default":v,w=void 0===(b=r.SiblingComponent)?null:b,_=void 0!==(S=r.rethrowError)&&S,(0,x.Z)()){e.next=30;break}return e.prev=4,e.next=7,(0,E.ZP)({subAppName:a,exposedModuleName:d,exportName:g,shouldSendErrorToSentry:!_});case 7:I=(O=e.sent).component,T=O.moduleVersion,e.next=18;break;case 12:if(e.prev=12,e.t0=e.catch(4),!_){e.next=16;break}throw e.t0;case 16:return(0,A.h)("WebPlatformModuleResolutionError","Error resolving ".concat(a,"/").concat(d),e.t0),e.abrupt("return",function(){return(0,N.jsx)(L,{subAppName:a})});case 18:if(e.prev=18,!(Array.isArray(R=window[C.Nb])&&R.length>0&&"function"==typeof window.__NEXT_PRELOADREADY)||!((F=R.map(function(e){return e.moduleName?"".concat(e.moduleName):"".concat(e.module)})).length>0)){e.next=25;break}return e.next=25,window.__NEXT_PRELOADREADY(F);case 25:e.next=30;break;case 27:e.prev=27,e.t1=e.catch(18),console.error("Error parsing dynamic modules",e.t1);case 30:return H=function(e){return function(){var r=(0,i.Z)(u().mark(function r(t){var n;return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e(t);case 2:return n=r.sent,r.next=5,K(n,t);case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()},K=function(){var e=(0,i.Z)(u().mark(function e(r,t){var n;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!(0,x.Z)()||m.Vi===j.PRODUCTION)){e.next=2;break}return e.abrupt("return",r);case 2:return e.prev=2,e.next=5,function(e){return Z.apply(this,arguments)}(t.req);case 5:if(!(n=e.sent)){e.next=8;break}return e.abrupt("return",M(M({},r),{},{__logData:n}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.warn("[getTopLevelPage] Failed to capture logs for client injection:",e.t0.message);case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}},e,null,[[2,10]])}));return function(r,t){return e.apply(this,arguments)}}(),q=function(){var e=(0,i.Z)(u().mark(function e(r){var t,n,o,s,i,c,l,f,h,v,b,w;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"true"!==m.h7&&r.res&&r.res.setHeader("Content-Security-Policy","frame-ancestors none"),e.prev=1,e.next=4,(0,E.ZP)({subAppName:a,exposedModuleName:d,exportName:g,context:r,shouldSendErrorToSentry:!_});case 4:t=(s=e.sent).getInitialProps,(n=s.component).__version=s.moduleVersion,o=s.moduleVersion,e.next=19;break;case 11:if(e.prev=11,e.t0=e.catch(1),!_){e.next=15;break}throw e.t0;case 15:return console.error("Failed to resolve sub-app ".concat(a,"/").concat(d),e.t0),c=null!==(i=e.t0.statusCode)&&void 0!==i?i:500,r.res.statusCode=c,e.abrupt("return",{ServerSideComponent:p(),statusCode:c});case 19:if(e.prev=19,!(null!==(l=n)&&void 0!==l&&l.getInitialProps)){e.next=26;break}return e.next=23,null===(h=n)||void 0===h?void 0:h.getInitialProps(r);case 23:case 29:f=e.sent,e.next=33;break;case 26:if(!t){e.next=32;break}return e.next=29,t(r);case 32:f={};case 33:var u;if(b=(v=f).errorCode,w=v.errorMessage,!b){e.next=36;break}return e.abrupt("return",(u="".concat(a,"/").concat(d),console.error(w?"".concat(u," Error: Failed to fetch data from getInitialProps, returned error code ").concat(b," with error message: ").concat(w):"".concat(u," Error: Unknown error trying to fetch data from getInitialProps, error code ").concat(b,".")),r.res.statusCode=b,(0,N.jsx)(p(),{statusCode:b})));case 36:return e.abrupt("return",M({ServerSideComponent:n,moduleVersion:"".concat(a,".").concat(o),subAppName:a},f));case 39:if(e.prev=39,e.t1=e.catch(19),!_){e.next=43;break}throw e.t1;case 43:return console.error("Error calling getInitialProps function for sub-app ".concat(a,"/").concat(d),e.t1),r.res.statusCode=500,e.abrupt("return",{ServerSideComponent:p(),statusCode:500});case 47:case"end":return e.stop()}},e,null,[[1,11],[19,39]])}));return function(r){return e.apply(this,arguments)}}(),U.getInitialProps=H(q),U.pageType=n,e.abrupt("return",U);case 36:case"end":return e.stop()}},e,null,[[4,12],[18,27]])})),function(){return n.apply(this,arguments)})}}]);