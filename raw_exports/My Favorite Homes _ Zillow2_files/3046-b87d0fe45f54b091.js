"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3046],{2546:function(e,t,n){n.d(t,{Ap:function(){return u.ar},Ho:function(){return u.Ho},y$:function(){return s}});var r=n(29),o=n(4687),c=n.n(o),u=n(4009),i=n(8357),a=n(1037);function s(e){return l.apply(this,arguments)}function l(){return(l=(0,r.Z)(c().mark(function e(t){var n,r,o,s,l,f,p,d,v,h,y,b,m,g,k=arguments;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=k.length>1&&void 0!==k[1]?k[1]:{}).request,o=n.response,e.prev=1,!function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.request,o=n.response,c=null!==(t=(0,u.Ho)({request:r}))&&void 0!==t?t:{},s=c[e];if(s){if((0,u.Iu)(c,{request:r,response:o}),/^\[.*\]$/i.test(s))return(0,a.n)()?void 0:JSON.parse(s);if(!(0,a.n)()||"true"===i.SL)return s}}(t,{request:r,response:o})){e.next=5;break}return e.abrupt("return");case 5:if(s=null==r?void 0:r.weightedManifestCacheByGuid,l=null==r?void 0:r.rawManifestCache,!(s&&l)){e.next=14;break}return e.next=10,s.getAssignedManifest(t);case 10:d=e.sent,v=null===(f=l[t])||void 0===f||null===(f=f.versions)||void 0===f||null===(f=f[0])||void 0===f?void 0:f.version,(h=null==d||null===(p=d.versions)||void 0===p||null===(p=p[0])||void 0===p?void 0:p.version)&&h!==v&&(y="".concat(r.method," ").concat(r.path," ").concat(h),r.customDatadogResourceName=y);case 14:return(b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.request;return(null==t?void 0:t.versionExperimentContext)||{}}({request:r})[t])&&(m=b.version,g="".concat(r.method," ").concat(r.path," ").concat(m),r.customDatadogResourceName=g,r.subAppVersionExperiment=m),e.abrupt("return");case 19:e.prev=19,e.t0=e.catch(1),console.error("setDataDogResourceNameAndExtendCookieExpirationIfNeeded error",e.t0);case 22:case"end":return e.stop()}},e,null,[[1,19]])}))).apply(this,arguments)}},4009:function(e,t,n){n.d(t,{Ho:function(){return i},Iu:function(){return u},ar:function(){return c},bm:function(){return a}});var r=n(6501),o="shopperPlatformSubAppOverrides",c=1800;function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.request,u=t.response,i=JSON.stringify(e);(0,r.d)(o,i,{path:"/",maxAge:c,req:n,res:u})}function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.request,c=null!==(e=(0,r.e)(o,n?{req:n}:{}))&&void 0!==e?e:"{}";try{return JSON.parse(c)}catch(e){console.error("failed to parse key-values out of cookie ".concat(o," for shopper-platform sub-app version overrides. cookie string value: ").concat(c))}return{}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=i({request:e.request}).addLogging;return"boolean"==typeof t&&t}},6501:function(e,t,n){n.d(t,{d:function(){return i},e:function(){return u}});var r=n(4730),o=n(2551),c=["res"];function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.req;if(n){if(n.cookies){if(null!==(c=n.cookies)&&void 0!==c&&c[e])return decodeURIComponent(n.cookies[e])}else if(null!==(r=n.headers)&&void 0!==r&&r.cookie){var r,c,u=o.parse(n.headers.cookie);if(null!=u&&u[e])return decodeURIComponent(u[e])}}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=n.res,i=(0,r.Z)(n,c);u&&u.setHeader?u.setHeader("Set-Cookie",o.serialize(e,t,i)):console.warn("setHeader is missing or res function not passed, unable to set the cookie ".concat(e,"."))}},3046:function(e,t,n){n.d(t,{ZP:function(){return q}});var r=n(29),o=n(9499),c=n(4687),u=n.n(c),i=n(4442),a=n(4487),s=n(2546),l=n(2262),f=n(2777),p=n(1531),d=n(3553),v=n(7247),h=n(748),y=n(6576),b=n(5269),m=function(e){(0,p.Z)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,v.Z)(r);return e=t?Reflect.construct(n,arguments,(0,v.Z)(this).constructor):n.apply(this,arguments),(0,d.Z)(this,e)});function r(e,t,o,c){var u;return(0,f.Z)(this,r),u=n.call(this,t),Object.setPrototypeOf((0,h.Z)(u),(this instanceof r?this.constructor:void 0).prototype),u.name=e,u.statusCode=o,u.type=c,(0,b.Z)()&&Error.captureStackTrace((0,h.Z)(u)),u}return(0,l.Z)(r)}((0,y.Z)(Error)),g=function(e){(0,p.Z)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,v.Z)(r);return e=t?Reflect.construct(n,arguments,(0,v.Z)(this).constructor):n.apply(this,arguments),(0,d.Z)(this,e)});function r(e,t){return(0,f.Z)(this,r),n.call(this,e,t,404)}return(0,l.Z)(r)}(m),k=function(e){(0,p.Z)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,v.Z)(r);return e=t?Reflect.construct(n,arguments,(0,v.Z)(this).constructor):n.apply(this,arguments),(0,d.Z)(this,e)});function r(e,t,o){return(0,f.Z)(this,r),n.call(this,e,t,500,o)}return(0,l.Z)(r)}(m),O=n(8357),x=0,Z=0,E="no root cause";function R(e){var t=e.cause;return t&&t instanceof Error?t.stack?t.stack:t.message?t.message:E:E}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function q(e){return A.apply(this,arguments)}function A(){return(A=(0,r.Z)(u().mark(function e(t){var n,r,o,c,l,f,p,d,v,h,y,b,m,E,w,q,A,P;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f=t.subAppName,p=t.exposedModuleName,h=(v=void 0===(d=t.context)?{}:d).req,y=v.res,m=void 0===(b=t.exportName)?"default":b,w=void 0===(E=t.shouldSendErrorToSentry)||E,e.next=3,(0,s.y$)(f,{request:h,response:y});case 3:return q={},e.prev=4,e.next=7,(0,i.xv)("".concat(f,"/").concat(p),{serverModuleTTL:parseInt(O.jB,10)||void 0,throwError:!0});case 7:q=e.sent,e.next=24;break;case 10:if(e.prev=10,e.t0=e.catch(4),w&&function(e,t){if(e.cause&&"ChunkLoadError"===e.cause.name)(function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!n.cause)return a.Tb(n,{tags:N({},r)});var o=n.cause,c=null==o||null===(e=o.message)||void 0===e?void 0:e.match(/[a-f0-9]+\.[a-f0-9]+\.bundle\.js/),u=c?c[0]:null!==(t=null==o?void 0:o.message)&&void 0!==t?t:"";o.name="Sub App Chunk Loading Error",a.Tb(o,{tags:N(N({},r),{},{bundleHash:u})})})(e,t);else{var n=Error(e);n.name="ImportRemoteError",a.Tb(n,{tags:N({},t)})}}(e.t0,{subAppName:f}),!(null!==(A=e.t0.cause)&&void 0!==A&&A.code)){e.next=21;break}e.t1=e.t0.cause.code,e.next="ECONNRESET"===e.t1?17:"EAI_AGAIN"===e.t1?19:21;break;case 17:return x+=1,e.abrupt("break",21);case 19:return Z+=1,e.abrupt("break",21);case 21:if((null===e.t0||void 0===e.t0?void 0:e.t0.type)!==i.OA.manifestEntryNotFound){e.next=23;break}throw new g("Sub-App ".concat(f,"/").concat(p," not found on manifest ImportRemoteError:\n ").concat(e.t0.stack||""," \n Cause: ").concat(R(e.t0)));case 23:throw new k("Sub-App ".concat(f,"/").concat(p," execution ImportRemoteError").concat(e.t0.type?" [".concat(null===e.t0||void 0===e.t0?void 0:e.t0.type,"]"):"",":\n ").concat(e.t0.stack||""," \n Cause: ").concat(R(e.t0)),"",null===e.t0||void 0===e.t0?void 0:e.t0.type);case 24:if(P=null!==(n=null===(r=q)||void 0===r?void 0:r[m])&&void 0!==n?n:null){e.next=27;break}throw new g("Sub-App ".concat(f," does not contain a exported named ").concat(m));case 27:return e.abrupt("return",{component:P,moduleVersion:null===(o=q)||void 0===o?void 0:o.__version,getInitialProps:null!==(c=null===(l=q)||void 0===l?void 0:l.getInitialProps)&&void 0!==c?c:function(){return{}}});case 28:case"end":return e.stop()}},e,null,[[4,10]])}))).apply(this,arguments)}},1037:function(e,t,n){n.d(t,{n:function(){return o}});var r=n(8357),o=function(){return"production"===r.Vi}}}]);