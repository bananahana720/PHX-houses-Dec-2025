# Appendix A: Data Flow Diagram

```
┌─────────────────────────────────────────────────────────────┐
│                    DATA INGESTION LAYER                      │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐      │
│  │ County API   │  │ Zillow/Redfin│  │ Google Maps  │      │
│  │ (Assessor)   │  │ (Listings)   │  │ (Geo Data)   │      │
│  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘      │
│         │                 │                  │               │
│         ▼                 ▼                  ▼               │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐      │
│  │ParcelData    │  │ListingData   │  │GeoData       │      │
│  │Validation    │  │Validation    │  │Validation    │      │
│  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘      │
│         │                 │                  │               │
└─────────┼─────────────────┼──────────────────┼───────────────┘
          │                 │                  │
          ▼                 ▼                  ▼
┌─────────────────────────────────────────────────────────────┐
│                  MERGE & ENRICHMENT LAYER                    │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  ┌────────────────────────────────────────────────────┐     │
│  │        EnrichmentMergeService                       │     │
│  │  - Conflict detection                               │     │
│  │  - Manual data preservation                         │     │
│  │  - Source precedence (County > Listing > Default)  │     │
│  └────────────────────┬───────────────────────────────┘     │
│                       │                                      │
│                       ▼                                      │
│  ┌────────────────────────────────────────────────────┐     │
│  │        LineageTracker                               │     │
│  │  - Field-level provenance                           │     │
│  │  - Confidence scoring                               │     │
│  │  - Temporal tracking                                │     │
│  └────────────────────┬───────────────────────────────┘     │
│                       │                                      │
└───────────────────────┼──────────────────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────────────────┐
│                   PERSISTENCE LAYER                          │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  ┌──────────────────┐          ┌──────────────────┐         │
│  │enrichment_data   │          │field_lineage     │         │
│  │.json             │          │.json             │         │
│  │                  │          │                  │         │
│  │[PropertyRecords] │          │{hash: {field:    │         │
│  │                  │          │  Lineage}}       │         │
│  └──────────────────┘          └──────────────────┘         │
│          │                              │                    │
│          │ atomic_json_save()           │ atomic_json_save() │
│          ▼                              ▼                    │
│  ┌──────────────────┐          ┌──────────────────┐         │
│  │.tmp file         │          │.tmp file         │         │
│  └────┬─────────────┘          └────┬─────────────┘         │
│       │ rename()                    │ rename()               │
│       ▼                             ▼                        │
│  [ATOMIC COMMIT]               [ATOMIC COMMIT]              │
│                                                               │
└─────────────────────────────────────────────────────────────┘
```

---
