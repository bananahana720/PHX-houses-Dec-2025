# enrichment_data.json Cleanup Documentation Index

**Status:** Complete - Documentation Only
**Created:** 2025-12-01
**Coverage:** 117 fields analyzed, 55 cleanup candidates identified (47%)

## Quick Navigation

### For a Quick Overview
Start here: **[CLEANUP_REPORT.txt](CLEANUP_REPORT.txt)**
- Executive summary of findings
- 3-phase cleanup timeline
- Risk assessment and effort estimates
- Key metrics and implementation guidance

### For Implementation Details
Read: **[enrichment_data_cleanup.md](enrichment_data_cleanup.md)**
- Detailed field-by-field analysis
- Synonym consolidations (7 groups)
- Computed fields that should be removed (6)
- Orphaned metadata audit (25+ fields)
- Migration strategy with pseudocode
- Cleanup script template (Python skeleton)
- Validation checklist

## Document Structure

### 1. CLEANUP_REPORT.txt (Executive Summary)
```
✓ Quick overview: 5 min read
✓ All categories summarized
✓ Phase timeline: 4 weeks
✓ Effort estimates: 5-8 days total
✓ Risk assessment: LOW to MEDIUM
```

### 2. enrichment_data_cleanup.md (Comprehensive Reference)
```
✓ Detailed technical analysis
✓ Field-by-field rationale
✓ Code locations and dependencies
✓ Migration script template
✓ Pre-cleanup checklist
✓ Post-cleanup validation
```

### 3. This Index
```
✓ Navigation guide
✓ Document cross-references
✓ Phase roadmap
✓ Implementation checklist
```

---

## Field Cleanup Categories

### Category 1: Synonym Fields (10 fields)
**Risk:** LOW | **Effort:** 1 day | **Phase:** 1

| Field | Keep | Remove | Reason |
|-------|------|--------|--------|
| ceiling_height_score | high_ceilings_score | ceiling_height_score | Legacy naming |
| kitchen_quality_score | kitchen_layout_score | kitchen_quality_score | Legacy naming |
| master_quality_score | master_suite_score | master_quality_score | Legacy naming |
| laundry_score | laundry_area_score | laundry_score | Legacy naming |
| list_price | (remove) | list_price | CSV duplicate |
| fireplace_score | (clarify) | fireplace_score | Ambiguous semantic |

**See:** enrichment_data_cleanup.md Section 1 (Synonym Fields)

---

### Category 2: Computed Fields (6 fields)
**Risk:** MEDIUM | **Effort:** 2-3 days | **Phase:** 2

| Field | Type | Generated By | Why Remove |
|-------|------|-------------|-----------|
| cost_breakdown | dict | CostEstimationService | Runtime computation |
| monthly_cost | float | Cost pipeline | Runtime computation |
| kill_switch_passed | bool | KillSwitchEvaluator | Diagnostic, not state |
| kill_switch_failures | list | Kill-switch logic | Debug artifact |
| sqft | float | CSV column | Data duplication |
| price | int | CSV column | Data duplication |

**See:** enrichment_data_cleanup.md Section 2 (Computed Fields)

---

### Category 3: Orphaned Metadata (25+ fields)
**Risk:** LOW | **Effort:** 1-2 days | **Phase:** 3

#### 3A. Source Fields (17 total)
**Canonical system:** field_lineage.json (LineageTracker)
**Finding:** enrichment_data.json source fields are DUPLICATES

#### 3B. Confidence Fields (9 total)
**Keep:** Age estimation confidence (intentional)
**Consolidate:** Assessment confidence (overlapping fields)

#### 3C. Interior Aliases (8 total)
**Issue:** Duplicate naming convention
**Action:** Choose one naming convention consistently

#### 3D. Computed Sections (5 total)
**Recommendation:** Remove - should be computed, not stored

**See:** enrichment_data_cleanup.md Section 3 (Orphaned Metadata)

---

## Implementation Timeline

### Phase 1: Synonyms (1 day) - LOW RISK
**When:** Next sprint
**What:** Consolidate 7 duplicate field names
**Effort:** Find references, consolidate, test

### Phase 2: Computed Fields (2-3 days) - MEDIUM RISK
**When:** During cost estimation refactor
**What:** Remove 6 computed fields
**Effort:** Audit, update callsites, test integration

### Phase 3: Metadata (1-2 days) - LOW RISK
**When:** After Phase 2 + LineageTracker verified
**What:** Consolidate 25+ metadata fields
**Effort:** Investigation, consolidation, refactoring

### Phase 4: Validation (1-2 days)
**When:** Before merge to main
**What:** Full integration testing, audit trail verification

---

## Key Findings Summary

### Finding 1: LineageTracker Independence
**Status:** LineageTracker uses field_lineage.json, NOT enrichment_data.json

Result: enrichment_data.json source fields are DUPLICATES
Action: Safe to remove after code audit

### Finding 2: CSV as Source of Truth
**Status:** sqft and price duplicated from phx_homes.csv

Result: High data duplication risk
Action: Remove duplicates, enforce CSV references

### Finding 3: Computed Fields as State
**Status:** Pipeline artifacts stored as persistent fields

Result: Stale data risk, duplication of logic
Action: Compute dynamically, don't persist

---

## Pre-Cleanup Preparation

### Before Phase 1
- Review enrichment_data_cleanup.md Section 1
- Identify all code references to legacy field names
- Create backup of enrichment_data.json
- Plan merge strategy

### Before Phase 2
- Complete Phase 1 cleanup
- Create INVESTIGATION.md documenting findings
- Identify all cost_estimation callsites
- Audit kill-switch usage

### Before Phase 3
- Complete Phase 2 cleanup
- Run full test suite successfully
- Verify LineageTracker usage
- Document metadata consolidation rules

### Before Phase 4
- Complete Phases 1-3 cleanup
- All code references updated
- All tests passing
- Ready for final validation

---

## Frequently Asked Questions

**Q: Why not clean up everything at once?**
A: Phased approach reduces risk. Phase 1 is safe and quick.

**Q: What if I only want Phase 1?**
A: Perfectly fine. Phase 1 is self-contained.

**Q: Will cleanup affect deal sheet output?**
A: No. Field consolidation maintains values under canonical names.

**Q: How do I rollback if something goes wrong?**
A: Full rollback plan in enrichment_data_cleanup.md Section 6.

**Q: Should I modify enrichment_data.json now?**
A: No. This is documentation-only. Wait for Phase 1 approval.

---

## Next Steps

1. **Review:** Read CLEANUP_REPORT.txt (5 minutes)
2. **Assess:** Determine phase priorities for your team
3. **Investigate:** Follow investigation plan in Section 3.1
4. **Approve:** Get stakeholder sign-off on Phase 1
5. **Implement:** Use cleanup_enrichment_data.py template
6. **Validate:** Follow checklist before merge
7. **Document:** Update DESIGN.md with canonical field names

---

**Created:** 2025-12-01
**Coverage:** 117 fields, 55 cleanup candidates (47%)
**Documentation Status:** COMPLETE
**Data Modification Status:** NONE (documentation only)
**Next Review:** Phase 1 approval decision
